(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{163:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"两张网卡默认路由怎么使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#两张网卡默认路由怎么使用","aria-hidden":"true"}},[s._v("#")]),s._v(" 两张网卡默认路由怎么使用")]),s._v(" "),t("p",[s._v("环境为 ens160 and ens192")]),s._v(" "),t("p",[s._v("ens160 ip 192.168.90.14 netmask 255.255.255.0 getway 192.168.90.1")]),s._v(" "),t("p",[s._v("ens192. ip 10.10.70.130 netmask 255.255.255.0 getway 10.10.70.10")]),s._v(" "),t("p",[s._v("使用 route 命令查看默认路由 如下 （正确配置）")]),s._v(" "),t("p",[s._v("Destination Gateway Genmask Flags Metric Ref Use Iface")]),s._v(" "),t("p",[s._v("default 192.168.90.1 0.0.0.0 UG 0 0 0 ens160 （默认路由由 192.168.90.1 出去）C")]),s._v(" "),t("p",[s._v("10.10.0.0 _ 255.255.0.0 U 0 0 0 ens192 （访问 10 整个大段的网关配置）B")]),s._v(" "),t("p",[s._v("192.168.90.0 _ 255.255.255.0 U 0 0 0 ens160 （访问 192.168.90.0/24 整个小段的配置) A")]),s._v(" "),t("p",[s._v("#192.168.90.0 192.168.90.1 255.255.255.0 U 0 0 0 ens160 （可选）D")]),s._v(" "),t("h2",{attrs:{id:"添加到主机的路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加到主机的路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 添加到主机的路由")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("route add –host 192.168.1.11 dev eth0 //未知\n\nroute add –host 192.168.1.12 gw 192.168.1.1 //未知\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"添加到网络的路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加到网络的路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 添加到网络的路由")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("route add –net 192.168.90.0 netmask 255.255.255.0 ens160 A\n\nroute add –net 192.168.1.11 netmask 255.255.255.0 gw 192.168.1.1 （指定网关）D\n\nroute add –net 10.10.0.0/16 ens160 （网关\\*全部）B\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"添加默认网关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加默认网关","aria-hidden":"true"}},[s._v("#")]),s._v(" 添加默认网关")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("route add default gw 192.168.90.1 C\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"删除路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除路由","aria-hidden":"true"}},[s._v("#")]),s._v(" 删除路由")]),s._v(" "),t("p",[s._v("把 add 换成 del")]),s._v(" "),t("h2",{attrs:{id:"在-linux-下设置永久路由的方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-linux-下设置永久路由的方法","aria-hidden":"true"}},[s._v("#")]),s._v(" 在 linux 下设置永久路由的方法")]),s._v(" "),t("ol",[t("li",[s._v("在/etc/rc.local 文件中添加方法：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("route add -net 192.168.3.0/24 dev eth0\nroute add -net 192.168.2.0/24 gw 192.168.2.254\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("相关阅读：")]),s._v(" "),t("ul",[t("li",[s._v("linux 中 rc.local 自启动详解")]),s._v(" "),t("li",[s._v("linux 下/etc/rc.local 开机不执行问题的解决办法")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在/etc/sysconfig/network 里添加到末尾方法：\nGATEWAY=gw-ip 或者 GATEWAY=gw-dev")])]),s._v(" "),t("p",[s._v("3，修改 static-routes 文件 /etc/sysconfig/static-routes")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("any net 192.168.3.0/24 gw 192.168.3.254\nany net 10.250.228.128 netmask 255.255.255.192 gw 10.250.228.129\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果在 rc.local 中添加路由会造成 NFS 无法自动挂载问题，所以使用 static-routes 的方法是最好的。\n无论重启系统或重启网络：service network restart 均可以生效。")]),s._v(" "),t("p",[s._v("解决 NFS 问题的描述：\n按照 linux 启动的顺序，rc.local 里面的内容是在 linux 所有服务都启动完毕，最后才被执行的，其中的内容是在 netfs 之后才被执行的。\n即在 netfs 启动时，服务器上的静态路由是没有被添加的，所以 netfs 挂载不能成功。")]),s._v(" "),t("h3",{attrs:{id:"static-routes-是什么文件？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#static-routes-是什么文件？","aria-hidden":"true"}},[s._v("#")]),s._v(" static-routes 是什么文件？")]),s._v(" "),t("p",[s._v("这个是 network 脚本执行时调用的一个文件，这个文件的放置在/etc/sysconfig 目录下，在 network 脚本中的位置是：\n复制代码代码示例:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Add non interface-specific static-routes.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f /etc/sysconfig/static-routes "),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),t("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"^any"')]),s._v(" /etc/sysconfig/static-routes "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("read")]),s._v(" ignore args "),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n/sbin/route add -"),t("span",{attrs:{class:"token variable"}},[s._v("$args")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("以上脚本就是添加静态路由的方法，static-routes 写法为：\n复制代码代码示例:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("any net 192.168.0.0/16 gw 网关 ip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}],!1,null,null,null);n.options.__file="网卡默认路由.md";a.default=n.exports}}]);